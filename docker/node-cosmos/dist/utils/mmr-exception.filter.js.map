{"version":3,"file":"mmr-exception.filter.js","sourceRoot":"","sources":["../../src/utils/mmr-exception.filter.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;;;;;;;AAEtC,2CAMwB;AAGxB,IAAa,mBAAmB,GAAhC,MAAa,mBAAmB;IAC9B,KAAK,CAAC,SAAkB,EAAE,IAAmB;QAC3C,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAChC,MAAM,QAAQ,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QAEnC,IAAI,MAAc,CAAC;QACnB,IAAI,YAAoB,CAAC;QAEzB,IAAI,SAAS,YAAY,sBAAa,EAAE;YACtC,MAAM,GAAG,SAAS,CAAC,SAAS,EAAE,CAAC;YAC/B,YAAY,GAAG,SAAS,CAAC,OAAO,CAAC;SAClC;aAAM;YACL,MAAM,GAAG,mBAAU,CAAC,qBAAqB,CAAC;YAC1C,YAAY,GAAI,SAAmB,CAAC,OAAO,CAAC;SAC7C;QAED,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;YAC3B,UAAU,EAAE,MAAM;YAClB,KAAK,EAAE,YAAY;SACpB,CAAC,CAAC;IACL,CAAC;CACF,CAAA;AArBY,mBAAmB;IAD/B,IAAA,cAAK,GAAE;GACK,mBAAmB,CAqB/B;AArBY,kDAAmB","sourcesContent":["// Copyright 2020-2022 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  ExceptionFilter,\n  Catch,\n  ArgumentsHost,\n  HttpException,\n  HttpStatus,\n} from '@nestjs/common';\n\n@Catch()\nexport class MmrExceptionsFilter implements ExceptionFilter {\n  catch(exception: unknown, host: ArgumentsHost) {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse();\n\n    let status: number;\n    let errorMessage: string;\n\n    if (exception instanceof HttpException) {\n      status = exception.getStatus();\n      errorMessage = exception.message;\n    } else {\n      status = HttpStatus.INTERNAL_SERVER_ERROR;\n      errorMessage = (exception as Error).message;\n    }\n\n    response.status(status).json({\n      statusCode: status,\n      error: errorMessage,\n    });\n  }\n}\n"]}