{"version":3,"file":"ready.controller.js","sourceRoot":"","sources":["../../src/meta/ready.controller.ts"],"names":[],"mappings":";AAAA,gEAAgE;AAChE,sCAAsC;;;;;;;;;;;;AAEtC,2CAA4E;AAC5E,4CAA4C;AAC5C,mDAA+C;AAE/C,MAAM,MAAM,GAAG,IAAA,kBAAS,EAAC,OAAO,CAAC,CAAC;AAGlC,IAAa,eAAe,GAA5B,MAAa,eAAe;IAC1B,YAAoB,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;IAAG,CAAC;IAGlD,QAAQ;QACN,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;YAC5B,MAAM,IAAI,sBAAa,CACrB;gBACE,MAAM,EAAE,mBAAU,CAAC,mBAAmB;gBACtC,KAAK,EAAE,yCAAyC;aACjD,EACD,mBAAU,CAAC,mBAAmB,CAC/B,CAAC;SACH;IACH,CAAC;CACF,CAAA;AAXC;IADC,IAAA,YAAG,GAAE;;;;+CAWL;AAdU,eAAe;IAD3B,IAAA,mBAAU,EAAC,OAAO,CAAC;qCAEgB,4BAAY;GADnC,eAAe,CAe3B;AAfY,0CAAe","sourcesContent":["// Copyright 2020-2022 OnFinality Limited authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Controller, Get, HttpException, HttpStatus } from '@nestjs/common';\nimport { getLogger } from '../utils/logger';\nimport { ReadyService } from './ready.service';\n\nconst logger = getLogger('ready');\n\n@Controller('ready')\nexport class ReadyController {\n  constructor(private readyService: ReadyService) {}\n\n  @Get()\n  getReady() {\n    if (!this.readyService.ready) {\n      throw new HttpException(\n        {\n          status: HttpStatus.SERVICE_UNAVAILABLE,\n          error: 'Database schema is not created or ready',\n        },\n        HttpStatus.SERVICE_UNAVAILABLE,\n      );\n    }\n  }\n}\n"]}