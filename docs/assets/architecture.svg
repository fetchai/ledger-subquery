<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="379px" preserveAspectRatio="none" style="width:762px;height:379px;background:#FFFFFF;" version="1.1" viewBox="0 0 762 379" width="762px" zoomAndPan="magnify"><defs/><g><!--MD5=[46bf7fc5b00e2e288be9964da2bc4775]
cluster subql--><g id="cluster_subql"><rect height="212" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="352" x="404.5" y="7"/><rect height="10" style="stroke:#181818;stroke-width:1.0;fill:none;" width="15" x="736.5" y="12"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="734.5" y="14"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="734.5" y="18"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109" x="526" y="34.9659">SubQuery Node</text></g><!--MD5=[ce4875be2dd4e8bfcba4b196b0166f44]
cluster gql--><g id="cluster_gql"><rect height="149.5" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="334" x="54.5" y="69.5"/><rect height="10" style="stroke:#181818;stroke-width:1.0;fill:none;" width="15" x="368.5" y="74.5"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="366.5" y="76.5"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="366.5" y="80.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="83" x="180" y="97.4659">Graphql API</text></g><!--MD5=[e8f3788ad7b97e8de68b4194558bc2a1]
cluster db--><g id="cluster_db"><rect height="104" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="132" x="334.5" y="269"/><rect height="10" style="stroke:#181818;stroke-width:1.0;fill:none;" width="15" x="446.5" y="274"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="444.5" y="276"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="444.5" y="280"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="358.5" y="296.9659">Postgres DB</text></g><!--MD5=[bcc3f219e56406305f4ae6d11eed632d]
cluster fetchd--><g id="cluster_fetchd"><rect height="104" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="128" x="612.5" y="269"/><rect height="10" style="stroke:#181818;stroke-width:1.0;fill:none;" width="15" x="720.5" y="274"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="718.5" y="276"/><rect height="2" style="stroke:#181818;stroke-width:1.0;fill:none;" width="4" x="718.5" y="280"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="79" x="637" y="296.9659">Fetch Node</text></g><!--MD5=[9826acab262751e9a750422ccc9480a1]
entity subql_fetch--><g id="elem_subql_fetch"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="613" y="45"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="720" y="50"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="718" y="52"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="718" y="56"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="628" y="79.9659">Fetch service</text></g><!--MD5=[0686720d71d32ea68f81164171d509ce]
entity store--><g id="elem_store"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="428.5" y="154"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="534.5" y="159"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="532.5" y="161"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="532.5" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="443.5" y="188.9659">Store service</text></g><!--MD5=[2b2d5ad518bf6746de4ffeb5be0566d4]
entity manager--><g id="elem_manager"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="421" y="45"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="558" y="50"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="556" y="52"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="556" y="56"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="436" y="79.9659">Indexer manager</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="6" y="47.398">public gql endpoint</text><rect fill="#181818" height="12" style="stroke:#F1F1F1;stroke-width:1.5;" width="12" x="66.5" y="63.5"/><!--MD5=[a4cd7d68124d9a525004bef556792585]
entity apollo--><g id="elem_apollo"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="83.5" y="154"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="191.5" y="159"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="189.5" y="161"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="189.5" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="98.5" y="188.9659">Apollo server</text></g><!--MD5=[7eae009e615b9b6983304a21ed9c8914]
entity Postgraphile--><g id="elem_Postgraphile"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="247" y="154"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="352" y="159"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="350" y="161"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="350" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="262" y="188.9659">Postgraphile</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="325" y="246.898">private DB endpoint</text><rect fill="#181818" height="12" style="stroke:#F1F1F1;stroke-width:1.5;" width="12" x="394.5" y="263"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="610" y="246.898">public rpc endpoint</text><rect fill="#181818" height="12" style="stroke:#F1F1F1;stroke-width:1.5;" width="12" x="670.5" y="263"/><!--MD5=[474c6a21a9391710d15be2734b05ba1e]
link manager to store--><g id="link_manager_store"><path d="M497.72,94.25 C496.52,110.32 494.93,131.64 493.65,148.68 " fill="none" id="manager-to-store" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="493.27,153.82,497.9276,145.142,493.6415,148.8338,489.9497,144.5477,493.27,153.82" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[06df98e811e1b62c70db994008f65ed5]
link gql_port to apollo--><g id="link_gql_port_apollo"><path d="M76.12,75.66 C85.3,88.76 110.05,124.07 127.83,149.43 " fill="none" id="gql_port-to-apollo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="130.84,153.73,128.9535,144.0635,127.9717,149.6345,122.4007,148.6527,130.84,153.73" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[fb6b7a4e41d84bcc4f7b0a0e69c13180]
link apollo to Postgraphile--><g id="link_apollo_Postgraphile"><path d="M211.73,178.5 C221.7,178.5 231.68,178.5 241.65,178.5 " fill="none" id="apollo-to-Postgraphile" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="246.87,178.5,237.87,174.5,241.87,178.5,237.87,182.5,246.87,178.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b3be81deb4cbbc5e69f0aa4c45737ba9]
link Postgraphile to db_port--><g id="link_Postgraphile_db_port"><path d="M333.89,203.22 C352.97,221.78 378.42,246.53 391.66,259.4 " fill="none" id="Postgraphile-to-db_port" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="395.35,263,391.7031,253.8512,391.7718,259.5077,386.1154,259.5764,395.35,263" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4de96e170a9014c92c41e15c2968e035]
link store to db_port--><g id="link_store_db_port"><path d="M467.11,203.22 C448.03,221.78 422.58,246.53 409.34,259.4 " fill="none" id="store-to-db_port" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="405.65,263,414.8846,259.5764,409.2282,259.5077,409.2969,253.8512,405.65,263" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cfa18d4be9920c9950971b2786b1b29a]
link subql_fetch to rpc--><g id="link_subql_fetch_rpc"><path d="M676.5,94.32 C676.5,137.41 676.5,226.68 676.5,257.37 " fill="none" id="subql_fetch-to-rpc" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="676.5,262.69,680.5,253.69,676.5,257.69,672.5,253.69,676.5,262.69" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d6f9d88f615c44961898f2a8d9cc9ead]
@startuml
component "SubQuery Node" as subql {
    component "Fetch service" as subql_fetch
'    () "mappingHandler.ts" as subql_handlers
'    component "Sandbox service" as sandbox

'    sandbox  - -> subql_handlers

    component "Store service" as store
    component "Indexer manager" as manager

    manager - -> store
}

component "Graphql API" as gql {
    port "public gql endpoint" as gql_port

    component "Apollo server" as apollo
    gql_port -> apollo

    component Postgraphile

    apollo -> Postgraphile
}

component "Postgres DB" as db {
    port "private DB endpoint    " as db_port
}

Postgraphile ..> db_port

component "Fetch Node" as fetchd {
    port "public rpc endpoint" as rpc
}

store ..> db_port
subql_fetch ...> rpc
@enduml

@startuml
component "SubQuery Node" as subql {
    component "Fetch service" as subql_fetch


    component "Store service" as store
    component "Indexer manager" as manager

    manager - -> store
}

component "Graphql API" as gql {
    port "public gql endpoint" as gql_port

    component "Apollo server" as apollo
    gql_port -> apollo

    component Postgraphile

    apollo -> Postgraphile
}

component "Postgres DB" as db {
    port "private DB endpoint    " as db_port
}

Postgraphile ..> db_port

component "Fetch Node" as fetchd {
    port "public rpc endpoint" as rpc
}

store ..> db_port
subql_fetch ...> rpc
@enduml

PlantUML version 1.2022.6(Tue Jun 21 19:34:49 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>